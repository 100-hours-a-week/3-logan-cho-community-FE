<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>게시글 상세 - Kaboocam</title>
    <link rel="stylesheet" href="/css/reset.css" />
    <link rel="stylesheet" href="/css/theme.css" />
    <link rel="stylesheet" href="/css/layout.css" />
    <link rel="stylesheet" href="/pages/board/postDetail.css" />
    <link rel="stylesheet" href="/pages/mypage/mypage.css" />
  </head>
  <body>
    <div class="page-wrapper">
      <main class="main-content">
        <div class="container">
          <div class="post-detail-container">
            <!-- Post Header -->
            <section class="post-header">
            <div class="post-header-top">
              <h1 id="post-title" class="post-title"></h1>
              <div id="post-actions" class="post-actions" style="display: none;">
                <button class="btn-sm btn-edit" id="edit-post-btn">수정</button>
                <button class="btn-sm btn-delete" id="delete-post-btn">삭제</button>
              </div>
            </div>
            <div class="post-meta-info">
              <div class="post-author">
                <img id="author-avatar" src="/user-profile-illustration.png" alt="Author" class="author-avatar" />
                <div class="author-details">
                  <span id="author-name" class="author-name"></span>
                  <span id="post-date" class="post-date"></span>
                </div>
              </div>
              <div id="edit-badge" class="edit-badge" style="display: none;">수정됨</div>
            </div>
          </section>

          <!-- Post Images -->
          <section id="post-images" class="post-images">
            <!-- Images will be inserted here -->
          </section>

          <!-- Post Content -->
          <article id="post-content" class="post-content"></article>

          <!-- Post Stats -->
          <section class="post-stats">
            <div class="stats-card">
              <button class="stat-item stat-item-btn" id="like-btn">
                <img id="like-icon" src="/like.png" alt="좋아요" class="stat-icon" />
                <span id="like-count" class="stat-count">0</span>
              </button>
              <div class="stat-item">
                <img src="/comment.png" alt="댓글" class="stat-icon" />
                <span id="comment-count" class="stat-count">0</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">조회</span>
                <span id="view-count" class="stat-count">0</span>
              </div>
            </div>
          </section>

          <!-- Comments Section -->
          <section class="comments-section">
            <div class="comments-header">
              <h3 class="comments-title">댓글 <span id="comments-count">0</span></h3>
            </div>

            <!-- Comment Form -->
            <div id="comment-form-container" class="comment-form-container">
              <form id="comment-form" class="comment-form">
                <textarea 
                  id="comment-input" 
                  class="comment-input" 
                  placeholder="댓글을 작성해주세요..."
                  rows="1"
                ></textarea>
                <div class="comment-form-footer">
                  <button type="submit" class="btn-submit-comment">작성</button>
                </div>
              </form>
            </div>

            <!-- Comments List -->
            <div id="comments-list" class="comments-list">
              <!-- Comments will be loaded here -->
            </div>
          </section>
          </div>
        </div>
      </main>
    </div>

    <!-- Edit Post Modal -->
    <div class="modal-overlay" id="edit-post-modal" style="display: none;">
      <div class="modal create-post-modal">
        <div class="modal-header">
          <h3 class="modal-title">게시물 수정</h3>
          <button class="modal-close" id="close-edit-post-modal">&times;</button>
        </div>
        <div class="modal-body">
          <form id="edit-post-form">
            <div class="form-group">
              <label for="edit-post-title" class="form-label">제목</label>
              <input 
                type="text" 
                id="edit-post-title" 
                class="form-input" 
                placeholder="제목을 입력하세요"
                required
                maxlength="100"
              >
              <div class="form-error" id="edit-title-error"></div>
            </div>

            <div class="form-group">
              <label for="edit-post-content" class="form-label">내용</label>
              <textarea 
                id="edit-post-content" 
                class="form-textarea" 
                placeholder="내용을 입력하세요"
                required
                maxlength="2000"
                rows="6"
              ></textarea>
              <div class="form-helper">
                <span id="edit-content-char-count">0</span> / 2000
              </div>
              <div class="form-error" id="edit-content-error"></div>
            </div>

            <div class="form-group">
              <label class="form-label">이미지 (최대 3장)</label>
              <input 
                type="file" 
                id="edit-image-input" 
                accept="image/*" 
                multiple 
                hidden
              >
              <button 
                type="button" 
                id="select-edit-images-btn" 
                class="btn btn-outline"
              >
                이미지 선택
              </button>
              <div class="form-helper">JPG, PNG, GIF (최대 5MB)</div>
              <div id="edit-image-preview-container" class="image-preview-container"></div>
              <div class="form-error" id="edit-image-error"></div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-secondary" id="cancel-edit-post-btn">취소</button>
              <button type="submit" class="btn btn-primary">수정</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script type="module" src="/js/common.js"></script>
    <script type="module" src="/pages/board/postDetail.js"></script>
  </body>
</html>
